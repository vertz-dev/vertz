{
  "schema": "vertz.audit.v1",
  "version": "1.0.0",
  "audit": {
    "id": "audit-pr285-20260214",
    "date": "2026-02-14T21:10:00Z",
    "auditor": "auditor",
    "sessionId": "agent:auditor:subagent:c932eb1b-07c8-4904-a3aa-f022e74c8ab4",
    "type": "pr-audit"
  },
  "pr": {
    "number": 285,
    "title": "docs: add READMEs and examples for core, schema, compiler, cli, testing",
    "author": "vertz-dev-core",
    "authorType": "bot",
    "createdAt": "2026-02-14T18:49:49Z",
    "mergedAt": "2026-02-14T20:09:44Z",
    "mergeCommit": "e0eb97446fb3f3a0dec68d8e903fe3fc8db0fe53",
    "additions": 4004,
    "deletions": 0,
    "filesChanged": 17,
    "reviews": [
      {
        "author": "vertz-dev-front",
        "state": "DISMISSED"
      },
      {
        "author": "vertz-advocate",
        "state": "CHANGES_REQUESTED",
        "submittedAt": "2026-02-14T18:58:00Z"
      }
    ]
  },
  "agent": {
    "id": "ben",
    "name": "vertz-dev-core",
    "model": "unknown",
    "sessionKey": "N/A",
    "durationMs": null,
    "tokens": null
  },
  "grade": {
    "overall": "D",
    "numeric": 1,
    "categories": {
      "tdd": {
        "grade": "D",
        "numeric": 1
      },
      "process": {
        "grade": "F",
        "numeric": 0
      },
      "design": {
        "grade": "C",
        "numeric": 2
      },
      "dx": {
        "grade": "B",
        "numeric": 3
      },
      "security": {
        "grade": "A",
        "numeric": 4
      }
    }
  },
  "scores": {
    "tdd": {
      "grade": "D",
      "checks": {
        "testsBeforeImplementation": {
          "pass": false,
          "severity": "major",
          "evidence": "No test files found for example code. Files added: packages/core/examples/basic-api/index.ts (108 lines), packages/compiler/examples/analyze-app/index.ts (66 lines), packages/schema/examples/validation/index.ts (132 lines). No corresponding .test.ts or .spec.ts files."
        },
        "redGreenCycle": {
          "pass": false,
          "severity": "major",
          "evidence": "No test runs evidenced in PR or commit messages. Commit claims 'Pass quality gates (test + typecheck + lint)' but no test output provided."
        },
        "qualityGatesBeforeCommit": {
          "pass": false,
          "severity": "major",
          "evidence": "Commit message claims gates passed but no evidence provided (no CI logs, no terminal output, no test run confirmation)."
        },
        "noSkips": {
          "pass": true,
          "severity": null,
          "evidence": "No .skip, @ts-ignore, or --no-verify found in diff."
        }
      }
    },
    "process": {
      "grade": "F",
      "checks": {
        "ticketExists": {
          "pass": false,
          "severity": "critical",
          "evidence": "No ticket found in tickets/ directory. Searched for 'README', 'documentation', 'package compliance', 'PR #285' - no matches."
        },
        "branchCreated": {
          "pass": true,
          "severity": null,
          "evidence": "PR created from branch (merge commit e0eb974 shows branch merge)."
        },
        "changesetAdded": {
          "pass": true,
          "severity": null,
          "evidence": "Documentation-only PR, no package code changes requiring changeset."
        },
        "botScriptsUsed": {
          "pass": true,
          "severity": null,
          "evidence": "Author is vertz-dev-core[bot], bot scripts used."
        },
        "reviewApproved": {
          "pass": false,
          "severity": "critical",
          "evidence": "PR merged at 2026-02-14T20:09:44Z with CHANGES_REQUESTED status from vertz-advocate (josh) submitted at 2026-02-14T18:58:00Z. Josh's review stated: 'DECISION: REQUEST CHANGES' with 3 blocking issues."
        },
        "noPushToMain": {
          "pass": true,
          "severity": null,
          "evidence": "Changes merged via PR #285, not direct push to main."
        },
        "fabricatedReferences": {
          "pass": false,
          "severity": "critical",
          "evidence": "PR body references 'plans/audits/2026-02-14-package-compliance-audit.md' which does not exist. Command 'ls -la plans/audits/2026-02-14-*' shows no such file."
        },
        "changesAddressedInPR": {
          "pass": false,
          "severity": "major",
          "evidence": "Feedback addressed in commit 8db62dc on branch 'docs/package-readmes' at 2026-02-14T19:15:15Z, NOT in PR #285 branch. Changes were separate from merged PR."
        }
      }
    },
    "design": {
      "grade": "C",
      "checks": {
        "designDocExists": {
          "pass": false,
          "severity": "minor",
          "evidence": "No design doc found in plans/ directory. Documentation work may not require formal design doc, but 4000+ line addition covering 5 packages could have benefited from one."
        },
        "scopeMatchesTicket": {
          "pass": true,
          "severity": null,
          "evidence": "PR body lists 5 packages, all 17 files relate to those packages. No scope creep."
        },
        "rulesReadAtStart": {
          "pass": false,
          "severity": "minor",
          "evidence": "No evidence in commit messages or PR that RULES.md was consulted. Multiple rule violations suggest rules were not followed."
        }
      }
    },
    "dx": {
      "grade": "B",
      "checks": {
        "developerWalkthrough": {
          "pass": true,
          "severity": null,
          "evidence": "All 5 READMEs include Quick Start sections with copy-pasteable examples. Josh's review confirms: 'Comprehensive Examples' and 'Copy-Pasteable Code'."
        },
        "acceptanceCriteriaIncludeOutcomes": {
          "pass": false,
          "severity": "minor",
          "evidence": "No ticket, therefore no acceptance criteria. PR body describes packages documented but no user outcomes specified."
        },
        "examplesUsePublicAPI": {
          "pass": true,
          "severity": null,
          "evidence": "All examples import from public package names (@vertz/core, @vertz/schema, @vertz/testing). No internal imports found."
        },
        "verticalSlices": {
          "pass": true,
          "severity": null,
          "evidence": "Examples demonstrate end-to-end workflows (basic-api shows full CRUD, validation shows full validation pipeline). Josh confirmed examples show real use cases."
        }
      }
    },
    "security": {
      "grade": "A",
      "checks": {
        "noEval": {
          "pass": true,
          "severity": null,
          "evidence": "Documentation-only PR, no eval() or new Function() in diff."
        },
        "noHardcodedSecrets": {
          "pass": true,
          "severity": null,
          "evidence": "No secrets in diff (all markdown and example code)."
        },
        "inputSanitization": {
          "pass": true,
          "severity": null,
          "evidence": "N/A for documentation PR."
        }
      }
    }
  },
  "violations": [
    {
      "category": "tdd",
      "rule": "Tests before implementation",
      "severity": "major",
      "description": "No tests for example code",
      "evidence": "Example files added without corresponding test files: packages/core/examples/basic-api/index.ts (108 lines), packages/compiler/examples/analyze-app/index.ts (66 lines), packages/schema/examples/validation/index.ts (132 lines). No .test.ts or .spec.ts files found in git show e0eb974.",
      "recommendation": "Add test files for each example proving they work as documented. Structure: examples/{name}/index.ts + examples/{name}/index.test.ts."
    },
    {
      "category": "tdd",
      "rule": "Quality gates before every commit",
      "severity": "major",
      "description": "Quality gates claim unverified",
      "evidence": "Commit message states 'Pass quality gates (test + typecheck + lint)' but no evidence provided. No CI logs, no terminal output, no test run confirmation in PR discussion.",
      "recommendation": "All commits claiming quality gates must include evidence: CI run link OR terminal output showing 'bun run test && bun run typecheck && bun run lint'."
    },
    {
      "category": "process",
      "rule": "Never commit without a ticket",
      "severity": "critical",
      "description": "No ticket for documentation work",
      "evidence": "Searched tickets/ directory for 'README', 'documentation', 'package compliance', 'PR #285' - no matches found. RULES.md states: 'Never commit without a ticket'.",
      "recommendation": "Create retroactive ticket documenting scope, acceptance criteria, and approval trail. Assign ticket ID to this PR in git notes or PR description."
    },
    {
      "category": "process",
      "rule": "Evidence over claims (Auditor Principle #1)",
      "severity": "critical",
      "description": "Fabricated audit reference",
      "evidence": "PR body references 'plans/audits/2026-02-14-package-compliance-audit.md'. File does not exist (verified with ls -la plans/audits/). This creates false audit trail.",
      "recommendation": "Either create the referenced audit document retroactively, OR update PR description to cite the actual justification (e.g., 'Identified gap during manual package review')."
    },
    {
      "category": "process",
      "rule": "PR review required before merge",
      "severity": "critical",
      "description": "Merged with CHANGES_REQUESTED status",
      "evidence": "Josh (vertz-advocate) submitted 'CHANGES_REQUESTED' review at 2026-02-14T18:58:00Z with 3 blocking issues. PR merged at 2026-02-14T20:09:44Z (1h 11m later) without re-approval. Josh's review stated: 'DECISION: REQUEST CHANGES' with detailed required changes.",
      "recommendation": "Update PR policies to enforce: no merge until requested changes are addressed AND re-approved. Use GitHub branch protection if possible."
    },
    {
      "category": "process",
      "rule": "Changes must be in PR branch before merge",
      "severity": "major",
      "description": "Fixes pushed to separate branch post-merge",
      "evidence": "Commit 8db62dc 'docs: address Josh's DX review feedback for PR #285' was pushed to branch 'docs/package-readmes' at 2026-02-14T19:15:15Z. This commit is NOT part of PR #285 (merge commit e0eb974). Fixes were separate from merged PR.",
      "recommendation": "All PR feedback must be addressed in the PR branch before merge. Post-merge fixes on separate branches undermine the review process."
    },
    {
      "category": "design",
      "rule": "Design doc required for significant changes",
      "severity": "minor",
      "description": "No design doc for documentation work",
      "evidence": "No design doc found in plans/ for this 4000+ line documentation addition covering 5 packages. While docs may not always require design docs, the scale and scope justified one.",
      "recommendation": "For large documentation efforts, create design doc outlining: structure, standards, review criteria, examples strategy, DX goals."
    }
  ],
  "summary": "PR #285 adds high-quality README documentation for 5 core packages, addressing a real gap identified by josh's review. However, severe process violations occurred: (1) no ticket, (2) fabricated audit reference, (3) merged despite CHANGES_REQUESTED status, (4) no tests for examples, (5) quality gates unverified, (6) fixes addressed post-merge on separate branch. Content quality is B+ but process violations warrant D grade. Rework required: create ticket, add tests, fix audit reference, document merge decision, update policies.",
  "metadata": {
    "auditVersion": "1.0.0",
    "generatedBy": "auditor",
    "generatedAt": "2026-02-14T21:10:00Z",
    "transcriptAvailable": false
  }
}
