---
title: Access Control
description: Authentication and authorization in Vertz
---

# Access Control

Vertz provides a unified access control system for authentication and authorization.

## Overview

- **Authentication** — Who is the user? (Identity)
- **Authorization** — What can they do? (Permissions)

## Getting Started

```typescript
import { defineAccess } from 'vertz/schema';

const access = defineAccess({
  // Authentication providers
  providers: {
    email: {
      type: 'email',
      // Configure your email/password setup
    },
    oauth: {
      github: {
        clientId: process.env.GITHUB_CLIENT_ID,
        clientSecret: process.env.GITHUB_CLIENT_SECRET,
      },
    },
  },
  
  // Session configuration
  session: {
    duration: '7d',
    refreshable: true,
  },
});
```

## Role-Based Access

Define roles and permissions:

```typescript
const access = defineAccess({
  roles: {
    admin: {
      permissions: ['*'],
    },
    editor: {
      permissions: ['post:read', 'post:create', 'post:update'],
    },
    viewer: {
      permissions: ['post:read'],
    },
  },
});
```

## Protecting Routes

```typescript
import { protected$ } from 'vertz/server';

export const adminRoute = protected$({
  role: 'admin',
  handler: async (req, { user }) => {
    // Only admins can reach here
    return { user };
  },
});
```

## Field-Level Security

Control access at the field level:

```typescript
const access = defineAccess({
  fields: {
    User: {
      email: 'self',        // Only the user themselves
      name: 'authenticated', // Any logged-in user
      role: 'admin',        // Only admins
    },
  },
});
```

## Middleware

Use access middleware for custom logic:

```typescript
const access = defineAccess({
  middleware: {
    onLogin: async (user, provider) => {
      // Custom logic after login
      await analytics.track('user_login', { userId: user.id });
    },
  },
});
```

## Next Steps

- **[Server](/concepts/server)** — Learn about server routes
- **[Domains](/concepts/domains)** — Domain-driven access rules
