# Text-to-Speech Narration Guide

## Overview

The demo toolkit now includes **professional TTS narration** that talks about the product during demos. This is a critical feature that makes demos engaging and informative.

## How It Works

1. **TTS Generation**: Each `narrate` action generates an audio clip using OpenClaw's TTS service
2. **Timestamp Tracking**: The script runner tracks when each narration should start
3. **Audio Timeline**: All narration clips are combined into a single audio track with proper timing
4. **Video Muxing**: FFmpeg combines the video recording with the audio track

## Writing Good Narration

### Professional Voice

The TTS voice should sound:
- ✅ Professional and warm
- ✅ Confident but not salesy
- ✅ Technical but accessible
- ❌ Not robotic or monotone

### Narration Best Practices

**DO:**
- Talk about the product's value proposition
- Explain what the user is seeing
- Highlight key framework features
- Use natural, conversational language
- Keep narration concise (1-2 sentences)

**DON'T:**
- Narrate every single action
- Use overly technical jargon
- Make unsubstantiated claims
- Talk too fast (TTS needs time)

### Example Narration Script

```typescript
// Good narration - explains value
{
  type: 'narrate',
  text: 'Welcome to Vertz — a full-stack framework with fine-grained reactivity.',
}

// Good - highlights a feature
{
  type: 'narrate',
  text: 'Filtering is instant. No virtual DOM diffing — just pure reactive updates.',
}

// Good - explains what's happening
{
  type: 'narrate',
  text: 'Forms in Vertz are progressively enhanced. They work without JavaScript, but get better with it.',
}

// Bad - too verbose
{
  type: 'narrate',
  text: 'Now we are going to click on the button that says filter, and then we will see the tasks get filtered.',
}

// Bad - too technical without context
{
  type: 'narrate',
  text: 'The reactive graph updates the DOM nodes via a topological sort of the dependency tree.',
}
```

## Narration Timing

### Placement Strategy

1. **Opening**: Set context and welcome viewers
2. **Before Major Actions**: Explain what's about to happen
3. **After Key Interactions**: Highlight what just happened
4. **Closing**: Call to action or summary

### Timing Example

```typescript
// Opening - sets context
{ type: 'narrate', text: 'Welcome to Vertz...' },
{ type: 'wait', ms: 1000 },

// Before action - explains what's about to happen
{ type: 'narrate', text: 'Let\'s filter the tasks...' },
{ type: 'click', selector: '[data-testid="filter"]' },

// After action - highlights the result
{ type: 'narrate', text: 'Filtering is instant...' },

// Final - call to action
{ type: 'narrate', text: 'Ready to build something amazing?' },
```

## Technical Details

### Audio Format

- Format: MP3
- Generated by: OpenClaw TTS service
- Synchronized with: Video timeline (millisecond precision)

### FFmpeg Muxing

The toolkit uses FFmpeg to combine:
- Input video (WebM from Playwright)
- Audio timeline (MP3 with multiple clips)
- Output: WebM or MP4 with audio track

### Fallback Behavior

If TTS fails:
- A silent audio placeholder is created
- The demo continues without audio
- A warning is logged

If FFmpeg is not available:
- Video is saved without audio
- A warning suggests installing FFmpeg

## Testing Narration

### Local Testing

```bash
# Start the app
cd examples/task-manager
bun run dev

# In another terminal, record the demo
cd packages/demo-toolkit
bun run record:task-manager
```

### Verify Output

- Check that the video file has an audio track
- Listen to the narration timing
- Ensure voice quality is professional

### Troubleshooting

**No audio in output:**
- Check if FFmpeg is installed: `ffmpeg -version`
- Check if TTS service is available
- Look for warnings in the console output

**Audio timing is off:**
- Adjust delay values between actions
- Add explicit `wait` actions for pacing
- Reduce narration text length

## Future Enhancements

1. **Voice Selection**: Multiple voices (professional, friendly, technical)
2. **Audio Effects**: Background music, sound effects
3. **Narration Scripts**: Separate narration text from demo actions
4. **Multi-language**: Generate demos in different languages
5. **Voice Customization**: Speed, pitch, emphasis

## Examples

See `scripts/task-manager.ts` for a complete example with:
- 6 narration clips
- Professional product messaging
- Proper timing and pacing
- Feature explanations
